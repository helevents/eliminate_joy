<!DOCTYPE html>
<html lang="en">

<head>
    <title>闯关模式第一关</title>
    <script src="javascripts/limit.js"></script>
    <script src="javascripts/mobileAdaption.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheets/style.css">
    <link rel="stylesheet" type="text/css" href="stylesheets/game.css">
    <link rel="stylesheet" href="font_1480255822072/font-embed.css">
    <script src="javascripts/usual.js"></script>
    <script>
        var score=0;
        var stuid = localStorage.stuid;
        Ajax({
            method: "POST",
            url: `http://localhost:8080/updatePasHistoryScore`,
            sendContent: `stuid=${stuid}`,
            success: function success(res) {
                if (res.status == 200) {
                    score=res.data.score;
                    console.log(score);
                    console.log("updated passone score=",score);
                    localStorage.setItem("passOneScore", score);
                    localStorage.setItem("historyScore", score);
                    $$('.time-record cite').innerHTML = score;
                } else if (res.status == 300) {
                    alert("update time score error!");
                }
            }
        });
    </script>
</head>

<body>
    <!-- 计时模式 -->

    <div class="allcontainer">
        <div id="container" class="container">
            <img src="images/game-time-bg.png" class="game-background" alt="">
            <div class="homepage-content">
                <div class="time-title-content">
                    <div class="time-text">
                        <div class="time-score-record">
                            <div class="time-btn time-score">
                                <span>得分</span>
                                <cite>0</cite>
                            </div>
                            <div class="time-btn time-record">
                                <span>记录</span>
                                <cite>{{ score }}</cite>
                            </div>
                        </div>
                        <div class="time-bar">
                            <img id="process-current" src="images/game-time-processbar-current.png" alt="">
                        </div>
                    </div>
                    <div class="time-to-stop"></div>
                </div>
            </div>
            <div id="canvas-container" class="canvas-container">
                <canvas id="canvas" class="canvas"></canvas>
            </div>
            <!-- <h5>©红岩网校工作站</h5> -->
        </div>

        <div class="next-checkpoint" style="display: none;">
            <div class="checkpoint-container">
                <p class="congratulate">恭喜你达到目标分数</p>
                <p class="next-pass">进入第二关</p>
            </div>
        </div>
        
        <div class="time-over" style="display: none;">
            <div class="time-over-container">
                <div class="time-over-content">
                    <h1 class="time-over-title">游戏结束</h1>
                    <div class="higest-score" data-class="新纪录">
                        <p>24597</p>
                    </div>
                    <div class="time-over-detail">
                        <p>
                            当前模式排名
                            <span class="time-rank">{{ rank }}</span>
                            名
                        </p>
                        <p>
                            历史最高纪录
                            <span class="time-higest-score">{{ score }}</span>
                            分
                        </p>
                    </div>
                    <div class="time-over-btn">
                        <a href="/" class="time-lbtn">
                            <img src="images/gameover-back.png" alt="">
                        </a>
                        <a href="passone" class="time-again">
                            <img src="images/gameover-again.png" alt="">
                        </a>
                        <a href="/" class="time-rbtn">
                            <img src="images/gameover-share.png" alt="">
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="no-dissloved" style="display: none;">
            <div class="no-dissloved-container">
                <p class="congratulate no-dissloved-text">没有可以消去的小建筑了</p>
            </div>
        </div>

        <div class="game-stop" style="display: none;">
            <div class="game-stop-container">
                <div class="game-stop-content">
                    <h1 class="time-over-title">暂停</h1>
                    <div class="score-to-success">
                        <span class="score-to-end">0</span>
                    </div>
                    <div class="time-over-btn">
                        <a href="/" class="time-lbtn">
                            <img src="images/gameover-back.png" alt="">
                        </a>
                        <div class="btn-to-continue time-to-stop time-to-continue"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="imgDiv">
            <div class="allimg">
                <img src="images/pass1-15.png" alt="">
                <img src="images/pass1-30.png" alt="">
                <img src="images/pass1-32.png" alt="">
                <img src="images/pass1-5.png" alt="">
                <img src="images/pass1-8.png" alt="">
            </div>
            <div class="img-clicked">
                <img src="images/pass1-clicked-15.png" alt="">
                <img src="images/pass1-clicked-30.png" alt="">
                <img src="images/pass1-clicked-32.png" alt="">
                <img src="images/pass1-clicked-5.png" alt="">
                <img src="images/pass1-clicked-8.png" alt="">
            </div>
            <div class="img-dissloved">
                <img src="images/pass1-dissloved-15.png" alt="">
                <img src="images/pass1-dissloved-30.png" alt="">
                <img src="images/pass1-dissloved-32.png" alt="">
                <img src="images/pass1-dissloved-5.png" alt="">
                <img src="images/pass1-dissloved-8.png" alt="">
            </div>
        </div>
    </div>

    <script src="javascripts/zepto.js"></script>
    <script src="javascripts/main.js"></script>

</body>
</html>
